#
# Configuración de vlmcsd optimizada para Ubuntu
#
# Este archivo contiene configuraciones recomendadas para Ubuntu Server/Desktop
# Ubicación: /etc/vlmcsd/vlmcsd.ini
#

# =============================================================================
# CONFIGURACIÓN DE RED
# =============================================================================

# Escuchar en todas las interfaces IPv4 en el puerto estándar KMS
Listen = 0.0.0.0:1688

# También escuchar en IPv6 (descomenta si es necesario)
;Listen = [::]:1688

# Escuchar solo en IP específica (más seguro para entornos de producción)
# Reemplaza 192.168.1.100 con la IP de tu servidor
;Listen = 192.168.1.100:1688

# Permitir binding a IPs extranjeras (útil para contenedores)
;FreeBind = true

# Protección contra conexiones desde IPs públicas
# 0 = sin protección, 1 = advertencia, 2 = rechazo, 3 = rechazo silencioso
PublicIPProtectionLevel = 2

# =============================================================================
# CONFIGURACIÓN DE LOGGING
# =============================================================================

# Archivo de log (asegúrate de que el directorio existe)
LogFile = /var/log/vlmcsd.log

# Incluir fecha y hora en logs (recomendado para archivos, no para systemd)
LogDateAndTime = true

# Log verboso (descomenta para debugging)
;LogVerbose = true

# =============================================================================
# CONFIGURACIÓN DE RENDIMIENTO
# =============================================================================

# Máximo número de procesos/hilos trabajadores
# Ajusta según la carga esperada (2-8 es típico)
MaxWorkers = 4

# Timeout de conexión en segundos
# Valor bajo previene conexiones colgadas
ConnectionTimeout = 30

# Desconectar clientes inmediatamente después de cada solicitud
# Ahorra recursos pero puede afectar compatibilidad
;DisconnectClientsImmediately = yes

# =============================================================================
# CONFIGURACIÓN DE SEGURIDAD
# =============================================================================

# Archivo PID para control del daemon
PidFile = /run/vlmcsd.pid

# Randomizar ePIDs en el inicio (mayor seguridad)
RandomizationLevel = 1

# Usar build específico del host en ePIDs (opcional)
;HostBuild = 19041

# Usar cultura específica en ePIDs (1033 = Inglés US)
;LCID = 1033

# =============================================================================
# CONFIGURACIÓN AVANZADA DE EPIDS
# =============================================================================

# ePIDs personalizados para diferentes productos
# Descomenta y personaliza según necesidades

# Windows (todas las versiones)
;Windows = 06401-00206-471-123456-03-1033-19041.0000-3282021

# Office 2010 (incluyendo Visio y Project)
;Office2010 = 06401-00096-199-234567-03-1033-19041.0000-3282021

# Office 2013 (incluyendo Visio y Project)
;Office2013 = 06401-00206-234-345678-03-1033-19041.0000-3282021

# Office 2016 (incluyendo Visio y Project)
;Office2016 = 06401-00206-437-456789-03-1033-19041.0000-3282021

# Office 2019 (incluyendo Visio y Project)
;Office2019 = 06401-00206-666-567890-03-1033-19041.0000-3282021

# Windows China Government (Enterprise G/GN)
;WinChinaGov = 06401-03858-000-678901-03-1033-19041.0000-3282021

# =============================================================================
# CONFIGURACIÓN DE DATOS KMS
# =============================================================================

# Archivo de datos KMS personalizado (opcional)
# Usado para definir productos y SKUs adicionales
;KmsData = /etc/vlmcsd/vlmcsd.kmd

# =============================================================================
# CONFIGURACIÓN PARA ENTORNOS VIRTUALES
# =============================================================================

# Configuración VPN/TAP (para entornos virtualizados)
# Descomenta y ajusta según tu configuración de red virtual
;VPN = KMS_TAP=192.168.100.1/24:1d

# =============================================================================
# OPCIONES DE COMPATIBILIDAD
# =============================================================================

# Salir bajo ciertas circunstancias (útil con systemd)
# 0 = permanecer activo, 1 = salir si no puede operar
;ExitLevel = 0

# =============================================================================
# NOTAS DE CONFIGURACIÓN
# =============================================================================

# Para aplicar cambios:
# sudo systemctl reload vlmcsd
# o
# sudo systemctl restart vlmcsd

# Para verificar configuración:
# vlmcs -v localhost

# Para ver logs:
# sudo journalctl -u vlmcsd -f
# o
# sudo tail -f /var/log/vlmcsd.log

# Para probar desde Windows:
# slmgr /skms IP_DEL_SERVIDOR:1688
# slmgr /ato

# =============================================================================
# SEGURIDAD Y LEGALIDAD
# =============================================================================

# IMPORTANTE: Este software es solo para fines educativos y de prueba.
# Asegúrate de cumplir con:
# 1. Los términos de licencia de Microsoft
# 2. Las leyes de software de tu jurisdicción
# 3. Las políticas de tu organización
#
# El uso indebido puede violar licencias de software y leyes locales.
