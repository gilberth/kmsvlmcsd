# ğŸ–¥ï¸ vlmcsd â€“ KMS Server

**vlmcsd** es un servidor KMS (*Key Management Service*) emulador que permite activar productos **Microsoft Windows** y **Office**.  
Emula un servidor KMS en tu red local, permitiendo que los clientes activen su software sin conectarse a los servidores de Microsoft.

---

## âœ¨ CaracterÃ­sticas

- **Ligero** â€“ Imagen Docker optimizada con soporte SSL.  
- **Multiplataforma** â€“ Soporte para arquitecturas `amd64` y `arm64`.  
- **Autocontenido** â€“ No requiere dependencias externas.  
- **Seguro** â€“ Construido con `Dockerfile.secure` y buenas prÃ¡cticas de seguridad.  
- **Persistente** â€“ ConfiguraciÃ³n con reinicio automÃ¡tico.  

---

## ğŸš€ Despliegue RÃ¡pido con Docker

### 1ï¸âƒ£ Requisitos Previos
- **Docker** instalado en el sistema.
- **Puerto 1688** abierto (puerto estÃ¡ndar para KMS, configurable).
- **Acceso a red local** para los clientes que requieran activaciÃ³n.

### 2ï¸âƒ£ Comando de despliegue rÃ¡pido
\`\`\`bash
docker run -d   --name vlmcsd   --restart unless-stopped   -p 1688:1688   ghcr.io/gilberth/kms:latest
\`\`\`

### 3ï¸âƒ£ VerificaciÃ³n
\`\`\`bash
# Verificar que el contenedor estÃ¡ en ejecuciÃ³n
docker ps

# Ver logs del servidor
docker logs vlmcsd

# Probar el servidor
docker exec vlmcsd /usr/bin/vlmcs -v localhost
\`\`\`

---

## ğŸ³ Opciones de Despliegue

### ğŸ“¦ Despliegue BÃ¡sico
\`\`\`bash
docker pull ghcr.io/gilberth/kms:latest
docker run -d   --name vlmcsd   --restart unless-stopped   -p 1688:1688   ghcr.io/gilberth/kms:latest
\`\`\`

### ğŸ“„ Docker Compose
Archivo \`docker-compose.yml\`:
\`\`\`yaml
version: '3.8'
services:
  vlmcsd:
    image: ghcr.io/gilberth/kms:latest
    container_name: vlmcsd
    restart: unless-stopped
    ports:
      - "1688:1688"
    # Opcional: configuraciÃ³n personalizada
    # volumes:
    #   - ./vlmcsd.ini:/etc/vlmcsd.ini:ro
\`\`\`
Ejecutar:
\`\`\`bash
docker-compose up -d
\`\`\`

### âš™ï¸ ConfiguraciÃ³n Avanzada
\`\`\`bash
# Con archivo de configuraciÃ³n
docker run -d   --name vlmcsd   --restart unless-stopped   -p 1688:1688   -v /ruta/a/vlmcsd.ini:/etc/vlmcsd.ini:ro   ghcr.io/gilberth/kms:latest

# Con puerto personalizado
docker run -d   --name vlmcsd   --restart unless-stopped   -p 1689:1688   ghcr.io/gilberth/kms:latest
\`\`\`

---

## ğŸ› ï¸ ActivaciÃ³n de Clientes

### ğŸ’» Windows
\`\`\`cmd
slmgr /skms TU_IP_SERVIDOR:1688
slmgr /ato
slmgr /xpr
\`\`\`

### ğŸ“„ Office 2019/2021
\`\`\`cmd
cscript "C:\Program Files\Microsoft Office\Office16\ospp.vbs" /sethst:TU_IP_SERVIDOR
cscript "C:\Program Files\Microsoft Office\Office16\ospp.vbs" /act
cscript "C:\Program Files\Microsoft Office\Office16\ospp.vbs" /dstatus
\`\`\`

---

## ğŸ“‹ GestiÃ³n del Contenedor
\`\`\`bash
docker ps                  # Ver estado
docker stop vlmcsd         # Detener
docker start vlmcsd        # Iniciar
docker restart vlmcsd      # Reiniciar
docker logs -f vlmcsd      # Logs en tiempo real
docker rm vlmcsd           # Eliminar
\`\`\`

---

## ğŸ” Pruebas y Monitoreo
\`\`\`bash
docker exec vlmcsd /usr/bin/vlmcs -v localhost
vlmcs -v TU_IP_SERVIDOR
telnet TU_IP_SERVIDOR 1688
\`\`\`

---

## ğŸ—ï¸ ConstrucciÃ³n desde CÃ³digo Fuente

### Prerrequisitos
- Compilador GCC o compatible.  
- Sistema de construcciÃ³n Make.  
- LibrerÃ­as de desarrollo OpenSSL (opcional).

### Instrucciones
\`\`\`bash
make                   # ConstrucciÃ³n estÃ¡ndar
make FEATURES=full     # Con soporte OpenSSL completo
make clean && make     # Limpiar y reconstruir
\`\`\`
Binarios generados:
- \`vlmcsd\` â€“ Servidor KMS.  
- \`vlmcs\` â€“ Cliente KMS para pruebas.  
- \`vlmcsdmulti\` â€“ Binario multi-llamada.

---

## ğŸ“š DocumentaciÃ³n
\`\`\`bash
man man/vlmcsd.8
man man/vlmcs.1
man man/vlmcsd.7
man man/vlmcsd.ini.5
\`\`\`
Si no tienes \`man\` instalado, revisa los archivos \`.txt\`, \`.html\` y \`.pdf\` en el directorio \`man\`.

---

## âš ï¸ Consideraciones de Seguridad
Consulta \`SECURITY-ANALYSIS.md\` antes de usar en producciÃ³n.

---

## âš–ï¸ Aviso Legal
Este software es solo para **fines educativos y de prueba**.  
AsegÃºrate de cumplir con los tÃ©rminos de licencia de Microsoft y las leyes aplicables.

---

## ğŸ¤ Contribuciones
Â¡Bienvenidas! AsegÃºrate de mantener el estilo y la documentaciÃ³n.
