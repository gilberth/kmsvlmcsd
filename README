# vlmcsd - KMS Server

Un servidor KMS (Key Management Service) emulador que permite activar productos Microsoft Windows y Office. Emula un servidor KMS en tu red local, permitiendo a los clientes activar su software sin conectar a los servidores de Microsoft.

## üöÄ Despliegue R√°pido con Docker

### 1. Configuraci√≥n Requerida

Para desplegar vlmcsd necesitar√°s:
- **Docker**: Motor de contenedores instalado
- **Puerto 1688**: Puerto est√°ndar para KMS (configurable)
- **Red local**: Acceso de red para los clientes que necesitan activaci√≥n

### 2. Desplegar el Servidor KMS

```bash
# Despliegue r√°pido de una l√≠nea
docker run -d --name vlmcsd --restart unless-stopped -p 1688:1688 ghcr.io/gilberth/kms:latest
```

### 3. Verificar el Despliegue

```bash
# Verificar que el contenedor est√° ejecut√°ndose
docker ps

# Ver logs del servidor
docker logs vlmcsd

# Probar el servidor
docker exec vlmcsd /usr/bin/vlmcs -v localhost
```

## üê≥ Opciones de Despliegue

### Despliegue B√°sico
```bash
# Pull de la imagen
docker pull ghcr.io/gilberth/kms:latest

# Ejecutar con auto-reinicio
docker run -d \
  --name vlmcsd \
  --restart unless-stopped \
  -p 1688:1688 \
  ghcr.io/gilberth/kms:latest
```

### Despliegue con Docker Compose

Crea un archivo `docker-compose.yml`:

```yaml
version: '3.8'
services:
  vlmcsd:
    image: ghcr.io/gilberth/kms:latest
    container_name: vlmcsd
    restart: unless-stopped
    ports:
      - "1688:1688"
    # Opcional: configuraci√≥n personalizada
    # volumes:
    #   - ./vlmcsd.ini:/etc/vlmcsd.ini:ro
```

Luego ejecuta:
```bash
docker-compose up -d
```

### Configuraci√≥n Avanzada

```bash
# Con configuraci√≥n personalizada
docker run -d \
  --name vlmcsd \
  --restart unless-stopped \
  -p 1688:1688 \
  -v /ruta/a/vlmcsd.ini:/etc/vlmcsd.ini:ro \
  ghcr.io/gilberth/kms:latest

# Con puerto personalizado
docker run -d \
  --name vlmcsd \
  --restart unless-stopped \
  -p 1689:1688 \
  ghcr.io/gilberth/kms:latest
```

## üõ†Ô∏è Herramientas Disponibles

### Activaci√≥n de Clientes

**Windows:**
```cmd
# Configurar servidor KMS
slmgr /skms TU_IP_SERVIDOR:1688

# Activar Windows
slmgr /ato

# Verificar estado de activaci√≥n
slmgr /xpr
```

**Office:**
```cmd
# Configurar servidor KMS (Office 2019/2021)
cscript "C:\Program Files\Microsoft Office\Office16\ospp.vbs" /sethst:TU_IP_SERVIDOR

# Activar Office
cscript "C:\Program Files\Microsoft Office\Office16\ospp.vbs" /act

# Verificar estado
cscript "C:\Program Files\Microsoft Office\Office16\ospp.vbs" /dstatus
```

### Gesti√≥n del Contenedor

```bash
# Verificar estado
docker ps

# Detener servidor
docker stop vlmcsd

# Iniciar servidor
docker start vlmcsd

# Reiniciar servidor
docker restart vlmcsd

# Ver logs en tiempo real
docker logs -f vlmcsd

# Eliminar contenedor
docker rm vlmcsd
```

### Pruebas y Monitoreo

```bash
# Probar con cliente incluido
docker exec vlmcsd /usr/bin/vlmcs -v localhost

# Probar desde host (si vlmcs est√° instalado)
vlmcs -v TU_IP_SERVIDOR

# Verificar conectividad de red
telnet TU_IP_SERVIDOR 1688
```

## ‚ö° Caracter√≠sticas

- **Ligero**: Imagen Docker optimizada con soporte SSL
- **Multiplataforma**: Soporte para arquitecturas amd64 y arm64
- **Autocontenido**: No requiere dependencias externas
- **Seguro**: Construido con `Dockerfile.secure` con caracter√≠sticas de seguridad mejoradas
- **Persistente**: Configurado con pol√≠ticas de reinicio autom√°tico

## üìã Construcci√≥n desde C√≥digo Fuente

### Prerrequisitos

- Compilador GCC o compatible
- Sistema de construcci√≥n Make
- Librer√≠as de desarrollo OpenSSL (opcional)

### Instrucciones de Construcci√≥n

```bash
# Construcci√≥n est√°ndar
make

# Construcci√≥n con soporte OpenSSL completo
make FEATURES=full

# Limpiar construcci√≥n
make clean && make
```

Los binarios compilados estar√°n disponibles:
- `vlmcsd` - El daemon del servidor KMS
- `vlmcs` - Cliente KMS para pruebas
- `vlmcsdmulti` - Binario multi-llamada

## üìö Documentaci√≥n

Para documentaci√≥n detallada, usa las p√°ginas man:

```bash
man man/vlmcsd.8      # Documentaci√≥n del servidor vlmcsd
man man/vlmcs.1       # Documentaci√≥n del cliente vlmcs  
man man/vlmcsd.7      # Documentaci√≥n general de KMS
man man/vlmcsd.ini.5  # Formato del archivo de configuraci√≥n
```

Si no tienes man instalado, puedes usar los archivos .txt, .html y .pdf en el directorio man.

## ‚ö†Ô∏è Consideraciones de Seguridad

Por favor revisa el archivo `SECURITY-ANALYSIS.md` para consideraciones importantes de seguridad antes de desplegar vlmcsd en entornos de producci√≥n.

## ‚öñÔ∏è Aviso Legal

Este software es solo para prop√≥sitos educativos y de prueba. Los usuarios son responsables de asegurar el cumplimiento con los t√©rminos de licencia de Microsoft y las leyes aplicables en su jurisdicci√≥n.

## ü§ù Contribuciones

¬°Las contribuciones son bienvenidas! Por favor aseg√∫rate de que tu c√≥digo sigue el estilo existente e incluye documentaci√≥n apropiada.

## üìÑ Licencia

Ver los archivos de c√≥digo fuente para informaci√≥n de licenciamiento.
